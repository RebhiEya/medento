{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/dashboard1.css') }}">
{% endblock %}

{% block body %}
<div class="dashboard-layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="user-box">
            <div class="avatar">ðŸ‘¤</div>
            <h3>{{ app.user.prenom }} {{ app.user.nom }}</h3>
            <span class="role">Patient</span>
        </div>

        <nav class="menu">
            <a href="{{ path('patient_dashboard') }}" class="active">Dashboard</a>
            <a href="{{ path('patient_rendezvous_new') }}">Ajouter un rendez-vous</a>
            <a href="{{ path('patient_services') }}">Services</a>
            <a href="{{ path('app_logout') }}" class="logout">DÃ©connexion</a>
        </nav>
    </aside>

    <!-- MAIN -->
    <main class="main-content">

        <!-- HEADER -->
        <header class="header">
            <h2>Bonjour {{ app.user.prenom }} ðŸ‘‹</h2>
            <p>Voici la liste de vos rendez-vous</p>
        </header>

        <!-- TABLE -->
        <section class="card">
            <h3>ðŸ“… Mes rendez-vous</h3>

            {% if rendezVous is empty %}
                <p class="empty">Aucun rendez-vous trouvÃ©.</p>
            {% else %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for rdv in rendezVous %}
                        <tr>
                            <td>{{ rdv.date|date('d/m/Y H:i') }}</td>
                            <td>{{ rdv.description }}</td>
                            <td>
                                <span class="badge {{ rdv.status }}">
                                    {{ rdv.status|replace({'_':' '})|capitalize }}
                                </span>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </section>

    </main>
</div>
{% endblock %}
